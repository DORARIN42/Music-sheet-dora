<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë””ë²„ê·¸ ëª¨ë“œ</title>
    <style>
        body {
            font-family: monospace;
            background: #1a1a1a;
            color: #0f0;
            padding: 20px;
            font-size: 14px;
        }
        .log {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #0f0;
        }
        .error {
            color: #f00;
            border-left-color: #f00;
        }
    </style>
</head>
<body>
    <h1>ğŸ¥ DRUM SHEET - ë””ë²„ê·¸ ëª¨ë“œ</h1>
    <div id="logs"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-storage-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
    <script src="js/firebase-db.js"></script>

    <script>
        const logsEl = document.getElementById('logs');
        
        function log(message, isError = false) {
            const div = document.createElement('div');
            div.className = 'log' + (isError ? ' error' : '');
            div.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            logsEl.appendChild(div);
            console.log(message);
        }

        async function test() {
            try {
                log('=== ë””ë²„ê·¸ ì‹œì‘ ===');
                
                log('1. Firebase ì´ˆê¸°í™” ì‹œì‘...');
                await firebaseDB.init();
                log('âœ… Firebase ì´ˆê¸°í™” ì™„ë£Œ');
                
                log('2. ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸...');
                const isLoggedIn = firebaseDB.isLoggedIn();
                log(`ë¡œê·¸ì¸ ìƒíƒœ: ${isLoggedIn}`);
                
                if (firebaseDB.currentUser) {
                    log(`ì‚¬ìš©ì: ${firebaseDB.currentUser.email}`);
                    log(`UID: ${firebaseDB.currentUser.uid}`);
                } else {
                    log('currentUser: null');
                }
                
                if (!isLoggedIn) {
                    log('âš ï¸ ë¡œê·¸ì•„ì›ƒ ìƒíƒœ - ë¡œê·¸ì¸ í•„ìš”');
                    log('Google ë¡œê·¸ì¸ ì‹œì‘...');
                    await firebaseDB.signInWithGoogle();
                    log('ë¡œê·¸ì¸ ìš”ì²­ ì™„ë£Œ (redirect ì¤‘...)');
                    return;
                }
                
                log('3. ê³¡ ëª©ë¡ ì¡°íšŒ ì‹œì‘...');
                const songs = await firebaseDB.getAllSongs();
                log(`âœ… ê³¡ ${songs.length}ê°œ ì¡°íšŒ ì™„ë£Œ`);
                
                songs.forEach((song, i) => {
                    log(`  ${i+1}. ${song.title} - ${song.artist}`);
                });
                
                log('=== ëª¨ë“  í…ŒìŠ¤íŠ¸ ì™„ë£Œ ===');
                
            } catch (error) {
                log(`âŒ ì—ëŸ¬ ë°œìƒ: ${error.message}`, true);
                log(`   ì½”ë“œ: ${error.code || 'N/A'}`, true);
                log(`   ìŠ¤íƒ: ${error.stack}`, true);
            }
        }

        test();
    </script>
</body>
</html>
